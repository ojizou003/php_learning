2023/08/20~08/22

# 「【2023】PHP入門」 シェルナ

## PHPが使われる場面

1. WebサイトとWebアプリケーションの開発
2. CMS(Contents Management System) コンテンツ管理システム
  WordPressなど
3. Webフレームワーク
  Laravelなど

## MAMPの導入

MAMP(Macintosh,Apache,MySQL,PHP)
  MAMPのインストール

## PHPの基本

1. コードの書き方
  ```PHP
  <?php
  echo "Hello,World";
  ?>
  ```

  ※PHPは、HTML内で使える。この場合、拡張子は.php

2. 変数とデータ型
- 変数は、データを格納するための入れ物
- 変数はドル記号($)で始まる
- 変数に値を代入するためにはイコール記号(=)を使う
- 変数の宣言 ex.$name="John Beck";
- データ型
  - 整数(Integer)
  - 浮動小数点数(Float)
  - 文字列(string)
  - ブール値(boolean)
  - 配列(array)
    - 表し方は２通り
    - ①$配列名=array("","","");
    - ②$配列名=["","",""];
  - 連想配列
    - ①$配列名=array(""=>"",""=>"",""=>"");
    - ②$配列名=[""=>"",""=>"","",""=>""];
  - オブジェクト(Object)
    - オブジェクトとはデータとそのデータに対する操作をひとつにまとめたもの
    - NULL

3. 演算子
- 算術演算子
  - +,-,*,/,%,**
- 代入演算子
  - =,+=,-=,*=,/=,%=,.=
- 比較演算子
  - ==,!=,<>,>,<,>=,<=,===,!==
- 論理演算子
- AND演算子
- OR演算子
- NOT演算子
- インクリメント/デクリメント演算子

4. 制御構造
- if文
  - if(条件){trueのときの処理}
- else文
- elseif文
- switch文
- while文
- for文
- foreach文
  - ①値のみを取り出す場合
      foreach(配列as値){処理}
  - ②キーと値の両方を取り出す場合
      foreach(配列asキー=>値){処理}
- break文
- continue文

5. 文字列の表現方法
- '' ..シングルクォーテーション ..変数展開しない
- "" ..ダブルクォーテーション ..変数展開する
  配列やオブジェクトのプロパティも展開可能
  エスケープシーケンスも解釈する(\n,\t)
  {}で囲むとより明確に変数名を特定することができる
  ダブルクォーテーション内でダブルクォーテーションを使いたいときは\でエスケープ

## 関数

1. 関数とは
関数とは、一連の命令をひとまとめにし、名前をつけて再利用可能にしたもの
- 関数の定義
```
function 関数名(){
  //関数内で行いたい処理
  }
```
- 関数の呼び出し
```
関数名();
```
- パラメータと引数
パラメータは「何が必要か」を提示し、引数は「それが何か」を提供する
- 関数の戻り値
return文
return文がない時はnullを返す

2. 関数のスコープ
- ローカルスコープ
- グローバルスコープ
  globalキーワードを使用することで関数の内部からもアクセス可能になる
- ブロックスコープ
  PHPはブロックスコープをサポートしていない
- 静的変数(static変数)
- スーパーグローバル変数
  - $_GET
  - $_POST
  - $_SERVER
  - $_COOKIE
  - $_SESSION

3. 組み込み関数
- 文字列関数
  - strlen() ..文字の長さを返す
  - str_replace ..文字列内の一部の文字列を別の文字列に置換
  - strpos ..指定した文字列が最初に出現する位置を返す
  - strtolower(),strtoupper() ..小文字,大文字に変換
  - substr ..文字列から部分文字列を返す
- 数値関数
  - abs() ..絶対値を計算
  - round() ..四捨五入
  - fleoor() ..切り捨て
  - ceil() ..切り上げ
  - rand() ..乱数の生成
  - max() ..最大値
  - min() ..最小値
  - is_numeric() ..数値または数値形式の文字列の場合trueを返す
  - pow() ..べき乗
  - sqrt() ..平方根
  - log() ..対数
- 配列関数
  - count() ..配列の要素数を数える
  - array_push() ..配列の末尾に要素を追加
  - print_r ..人間が読みやすい形で表示
  - array_pop() ..配列の末尾から要素を取り出す
  - arrya_shift() ..配列の先頭から要素を取り出す
  - in_array ..配列に指定した値が存在するか確認。存在する場合はtrueを返す
  - sort() ..昇順にソート
  - array_map ..指定した関数を適用し、その結果からなる新しい配列を生成する
  - array_walk() ..配列の各要素に対してユーザ定義関数を適用する
- 日付関数
  - date()
  - strtotime()
  - time()
  - mitime()
  - checkdate()

4. 関数の高度な使い方
- 可変関数
  - $functionName
- 匿名関数
- コールバック関数
  - ある関数の引数として渡され、その関数内で、あるタイミングで呼び出される関数
- デフォルト引数
- 可変長引数
  - function 関数名(...引数)

## クラスとオブジェクト指向

1. オブジェクト指向の基本概念
目的:再利用可能性とコードの整理、可読性の向上
- クラス
  クラスとは、オブジェクトを作成するための設計図、テンプレート
- オブジェクト
  オブジェクトは、その設計図(クラス)を元に作られたもの
- オブジェクト指向
  プログラムをオブジェクトの集まりとして構築する考え方
- プロパティ
  オブジェクトの状態を表現するデータの一部
- メソッド
  オブジェクトが行うことが出来る操作

2. オブジェクト指向プログラミングのメリット
- 再利用性
  クラスを一度定義すると、そのクラスから何度も新しいオブジェクトを作成することができる
- カプセル化
  プロパティとメソッドを一緒に包むことができることにより、内部状態を直接操作することなく他のオブジェクトと相互作用することができる
- 継承
  既存のクラスから新しいクラスを派生させることができる

3. クラスの定義とオブジェクトの生成
- クラスの定義
```PHP
class Car{
  //プロパティの定義
  public $color;
  public $model;
  //メソッドの定義
  public function startEngine(){
    echo "エンジンを起動します。";
  }
  public function stopEngine(){
    echo "エンジンを停止します。";
  }
}
```
- オブジェクトの生成
  new を使用して、クラスのインスタンスを作成
  クラスからオブジェクトを作成することをインスタンス化と呼ぶ
```PHP
class Person{
  //プロパティの定義
  public $name;
  public $birth_place;
  public $age;
  //メソッドの定義
  public function talk($content){
    return $content."について話している。";
  }
}
//インスタンス化
$person1= new Person("Harry Potter","UK",12);
$person2= new Person("Justin","Canada",30);
echo $person1 ->talk("魔法");
```
- プロパティやメソッドへのアクセス(アロー ->)
  オブジェクトのプロパティにアクセスするにはオブジェクト変数の後にアロー記号'->'とプロパティ名を書く
- メソッドへのアクセス
  同じくアロー記号'->'を使用 ex. ```$myCar->open();```
- $this変数
  現在のオブジェクトを参照
- コンストラクタ(初期化メソッド)
  オブジェクトが生成されるときに自動的に実行される
  オブジェクトのプロパティに初期値を設定できる
  __construct
- プロパティ
- メソッド

4. クラスの継承
- 親クラス、子クラス
- 継承の方法
  ```class 子クラス名 extends 親クラス名{子クラスのコード}```
- オーバーライド
  子クラスが親クラスから継承したメソッドを新しく定義し直すこと
- インターフェース
  特定のメソッドがクラスに実装されることを保証されるためのもので、interfaceを使用して定義する
  implementsでインターフェースを使用
- トレイト
  異なるクラス間でメソッドを再利用する仕組み
  単一継承の限界を緩和
  'trait'で定義し、'use'で適用

5. アクセス修飾子とカプセル化
- アクセス修飾子とは、クラスのプロパティやメソッドがどの程度まで外部からアクセス可能かを決定するためのキーワード
  - public
  - private
  - protected
- ゲッターとセッタ―
  - クラスのプロパティを安全に操作するためのメソッドで、外部から直接アクセスできないプロパティの値を読み取ったり、設定したりするために使用される
- カプセル化
  - クラスの内部状態を外部から隠蔽し、クラスのメソッドを通じてのみ、その状態を変更できるようにすること
  - コードの安全性と整理、管理が容易になる
- publicアクセス修飾子
  どこからでもアクセス可能
  クラスのメソッドとプロパティについてアクセス修飾子が指定されていない場合、デフォルトで'public' になる
- private修飾子
  そのクラスの内部からのみアクセス可能
- protected修飾子
  そのクラス自体とそのクラスを継承した子クラスからのみアクセス可能
- カプセル化の重要性
  - データの隠蔽
  - クラスの詳細の隠蔽
  - コードの再利用
  - 保守性と拡張性の向上

## フォームとPHP
HTMLフォームとPHPの連携について

1. HTMLフォームの基本
- ```<form>-<input>,<textarea>,<select>```
- フォームのデータ送信には、'POST'または'GET'のHTTPメソッドが使用される
  formタグのmethod属性で指定
- formタグのaction属性にはデータを送信する先のURL(通常はサーバーサイドのスクリプト)を指定
- GET ..主に情報を検索するために使用される

2. PHPでのフォームデータの処理
- GETで送信されたデータ
  $_GET['']
- POSTで送信されたデータ
  $_POST['']
- データの取得と利用
  ex.```$name = &_POST['name'];```
  (注意！)ユーザからの入力はデータはセキュリティ上の問題を引き起こす可能性があるため、適切な検証とクリーニングを行う必要がある
- htmlspecialchars関数
  '<'や'>'などのHTMLの特殊文字を安全なHTMLエンティティに変換する
- エラーハンドリング
  try-catch構文を使って例外をキャッチし、エラーメッセージをログに記録したり、ユーザーにエラーメッセージを表示したりする
- バリデーション
  ユーザーの入力データが適切な形式・範囲に収まっているかを検証するプロセスのこと

